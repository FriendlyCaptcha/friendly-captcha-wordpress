"use strict";(()=>{function e(){return document.querySelectorAll(".frc-captcha")}function t(e,t,s){""===e.style[t]&&(e.style[t]=s)}function s(e){let t,s;const n=new Promise(((e,n)=>{t=e,s=n}));return e&&e(t,s),{promise:n,resolve:t,reject:s}}function n(e,t){return 0===e.lastIndexOf(t,0)}function i(e){let t=[];const s=Object.keys(e),n=encodeURIComponent;for(let i=0;i<s.length;i++)t.push(`${n(s[i])}=${n(e[s[i]])}`);return t.join("&")}function r(e){const t=document.location;if(n(e,"/")||n(e,"."))return t.origin?t.origin:t.protocol+"//"+t.host;const s=e.match(x);if(!s)throw new Error("Invalid URL: "+e);return s[1]}function o(e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){let s="";for(let n=0;n<e;n++)s+=t.charAt(Math.floor(Math.random()*t.length));return s}function a(e){return new Promise(((t,s)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>s(e.error)}))}function c(e,t){const s=indexedDB.open(e);s.onupgradeneeded=()=>s.result.createObjectStore(t);const n=a(s);return(e,s)=>n.then((n=>s(n.transaction(t,e).objectStore(t))))}function d(){return E||(E=c("keyval-store","keyval")),E}function h(e){if(!D){let s=0;try{s=parseInt(sessionStorage.getItem(F)||"",10)}catch(t){}isNaN(s)&&(s=0),e&&s++,O=s.toString();try{sessionStorage.setItem(F,O)}catch(t){}}return O}function l(){let e;try{e=sessionStorage.getItem(I)}catch(t){return T}return e||(e=o(12),sessionStorage.setItem(I,e)),e}function m(e){e.textDecoration=e.fontStyle="none",e.fontWeight="500",e.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',e.lineHeight="1",e.letterSpacing="-0.0125rem"}function g(){const e=window.performance;return e?e.now():0}function u(e,...t){for(let n=0;n<t.length;n++){const i=t[n];for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}return e}function p(){const e=[0,0,0,0,0,0,0];return{s:e,add(t){const s=++e[0],n=t-e[1],i=n/s,r=i*i,o=n*i*(s-1);e[1]+=i,e[4]+=o*r*(s*s-3*s+3)+6*r*e[2]-4*i*e[3],e[3]+=o*i*(s-2)-3*i*e[2],e[2]+=o,1==s?e[5]=e[6]=t:(t<e[5]&&(e[5]=t),t>e[6]&&(e[6]=t))}}}function f(e,t,s=!1,n=document.body){const i=p();let r,o=!1;return n[j](e,(e=>{o&&!s||(r=e.timeStamp,o=!0)})),n[j](t,(e=>{o&&(i.add(e.timeStamp-r),o=!1)})),i.s}function y(e){const t=[];for(let s=0;s<e.length;s++)t.push(0),document[j](e[s],(()=>t[s]++));return t}function w(){const e=[0,0,0,0,0,0,0,0],t={8:1,46:1,9:2,45:3,17:4,13:5,37:6,38:6,39:6,40:6,33:7,34:7};return document[j]("keydown",(s=>{const n=s.keyCode;t[n]?e[t[n]]++:n>=112&&n<=123&&e[0]++})),e}function v(e,t,s,n){return $.sqrt($.pow(e-t,2)+$.pow(s-n,2))}function _(e,t,s){return $.sqrt($.pow(e,2)+$.pow(t,2)+$.pow(s,2))}function S(e,t){let s=t-e;return s+=s>180?-360:s<-180?360:0,s}function b(e){return e?B[e]||e:B.global}var E,R,k,M,x=/^((?:\w+:)?\/\/([^\/]+))/,C=class{constructor(e){this.ready=!1,this.buffer=[],this.id=e.id,this.type=e.type,this.element=e.element,this.onReady=e.onReady,this.origin=r(e.element.src)}send(e){this.ready?this.element.contentWindow.postMessage(e,this.origin):this.buffer.push(e)}setReady(e){this.onReady(),this.ready=e,this.ready&&this.flush()}flush(){for(let e=0;e<this.buffer.length;e++)this.element.contentWindow.postMessage(this.buffer[e],this.origin);this.buffer=[]}},A=class{constructor(){this.origins=new Set,this.targets={},this.answered=new Set,this.onReceiveRootMessage=()=>{},window.addEventListener("message",(e=>{this.onReceive(e)}))}listen(e){let t=this.onReceiveRootMessage;this.onReceiveRootMessage=s=>{t(s),e(s)}}addOrigin(e){this.origins.add(e)}send(e){if(e.from_id){const t=this.targets[e.from_id];if(!t)return void console.error(`[bus] Unexpected message from unknown sender ${e.from_id}`,e);"widget_announce"!==e.type&&"agent_announce"!==e.type||t.setReady(!0)}const t=e.rid;if(t){if(this.answered.has(t+e.to_id))return;this.answered.add(t+e.to_id)}if(""===e.to_id)return void this.onReceiveRootMessage(e);const s=this.targets[e.to_id];s?s.send(e):console.error(`[bus] Unexpected message to unknown target ${e.to_id}`,e)}onReceive(e){if(t=e.origin,s=this.origins,"*"!==t&&!s.has(t))return void console.debug("Friendly Captcha communication bus ignored message from origin "+e.origin,this.origins);var t,s;const n=e.data;n._frc&&this.send(n)}registerTarget(e){this.targets[e.id]=e}registerTargetIFrame(e,t,n,i){const r=s();let o=new Promise((e=>setTimeout((()=>e("timeout")),i)));const a=new C({id:t,element:n,type:e,onReady:()=>r.resolve("registered")});return this.registerTarget(a),Promise.race([r.promise,o])}removeTarget(e){delete this.targets[e]}},F="frc_sc",I="frc_sid",D=!1,O="0",T="__"+o(10),P=class{constructor(e){this.mem=new Map,this.storePrefix=e}setup(){return new Promise(((e,t)=>{if(void 0!==this._hasSA)return e(this._hasSA);try{indexedDB.open("")}catch(s){return e(this._hasSA=!1)}if(!document.hasStorageAccess)return e(this._hasSA=!0);document.hasStorageAccess().then((t=>(this._hasSA=t,this._hasSA?this.idb=c("friendlycaptcha","frc"):console.debug("FRC has no storage access"),e(this._hasSA)))).catch(t)}))}get(e,t){return this.setup().then((s=>{const n=this.storePrefix+"__"+e;if(t.p)return s?function(e,t=d()){return t("readonly",(t=>a(t.get(e))))}(n,this.idb):this.mem.get(e);try{const e=sessionStorage.getItem(n);return null===e?void 0:e}catch(i){}return this.mem.get(e)}))}set(e,t,s){return this.setup().then((n=>{const i=this.storePrefix+"__"+e;if(s.p){if(n)return function(e,t,s=d()){return s("readwrite",(s=>(s.put(t,e),a(s.transaction))))}(i,t,this.idb);void 0===t?this.mem.delete(e):this.mem.set(e,t)}else try{void 0===t?(this.mem.delete(e),sessionStorage.removeItem(i)):(this.mem.set(e,t),sessionStorage.setItem(i,t))}catch(r){}}))}hasSA(){return this._hasSA}},N="undefined"!=typeof navigator&&void 0!==navigator.userAgentData,W="FrcFrameId",X="frc-i-agent",L=class{constructor(e){this.state="init",this.response=".UNINITIALIZED",this.focusEventPending=!1,this.isDestroyed=!1,this.id=e.id;const t=e.createOpts;if(this.e=t.element,this.ready=e.registered,!this.e)throw new Error("No element provided to mount widget under.");if(this.e.frcWidget=this,this.formFieldName=void 0===t.formFieldName?"frc-captcha-response":t.formFieldName,this.sitekey=t.sitekey,this._reset=e.callbacks.onReset,this._destroy=e.callbacks.onDestroy,this._trigger=e.callbacks.onTrigger,this.startMode=e.createOpts.startMode||"focus",null!==this.formFieldName){const e=document.createElement("input");e.type="hidden",e.style.display="none",e.name=this.formFieldName,this.hiddenFormEl=e,this.e.appendChild(e)}this.setState({response:".UNCONNECTED",state:"init"}),this.ready.then((()=>{this.handleStartMode()}))}handleStartMode(){if("focus"!==this.startMode||this.focusEventPending||this.isDestroyed)"auto"===this.startMode&&this.trigger("auto");else{const t=function(e){for(;"FORM"!==e.tagName;)if(!(e=e.parentElement))return null;return e}(this.e);t&&(this.focusEventPending=!0,e=e=>{this.trigger("focus",{ev:e}),this.focusEventPending=!1},t.addEventListener("focusin",e,{once:!0,passive:!0}))}var e}reset(e={trigger:"root"}){if(this.isDestroyed)throw new Error("Can not reset destroyed widget.");this.setState({response:".RESET",state:"reset",resetTrigger:e.trigger}),this._reset(e),this.handleStartMode()}destroy(){this.isDestroyed=!0,this.hiddenFormEl?.remove(),this.hiddenFormEl=void 0,this.setState({response:".DESTROYED",state:"destroyed"}),this._destroy()}trigger(e,t={}){if(this.isDestroyed)throw new Error("Can not start destroyed widget.");const s=function(e,t,s,n){const i=g(),r=s.getBoundingClientRect(),o={v:1,tt:e,pnow:i,sm:t,el:{bcr:[r.left,r.top,r.width,r.height],con:document.body.contains(s)},stack:(new Error).stack||"",we:!!window.event,weit:!!window.event&&!!window.event.isTrusted};return n&&(o.ev={ts:n.timeStamp,rt:!!n.relatedTarget,eot:!!n.explicitOriginalTarget,it:n.isTrusted}),o}(e,this.startMode,this.e,t.ev);this._trigger({trigger:s})}start(){this.trigger("programmatic")}setState(e){const t=this.state!==e.state;this.response=e.response,this.state=e.state,this.hiddenFormEl&&!1!==this.e.isConnected&&(this.hiddenFormEl.value=e.response),t&&this.dispatchWidgetEvent({name:"frc:widget.statechange",error:e.error}),"expired"===this.state?this.dispatchWidgetEvent({name:"frc:widget.expire"}):"completed"===this.state?this.dispatchWidgetEvent({name:"frc:widget.complete"}):"error"===this.state?this.dispatchWidgetEvent({name:"frc:widget.error",error:e.error}):"reset"===this.state&&this.dispatchWidgetEvent({name:"frc:widget.reset",trigger:e.resetTrigger})}dispatchWidgetEvent(e){const t={response:this.response,state:this.state,id:this.id};u(t,e),function(e,t){let s;"function"==typeof window.CustomEvent?s=new CustomEvent(t.name,{bubbles:!0,detail:t}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(t.name,!0,!1,t)),e.dispatchEvent(s)}(this.e,t)}addEventListener(e,t,s){this.e.addEventListener(e,t,s)}removeEventListener(e,t,s){this.e.removeEventListener(e,t,s)}getState(){return this.state}getResponse(){return this.response}getElement(){return this.e}},Y=function(e){return"function"==typeof e},U=function(){const e=[],t=new Map,s=window,n=function(){try{const e=document.createElement("iframe");e.style.display="none",(document.body||document.head).appendChild(e);const t=e?e.contentWindow:0;return e.remove(),t||s}catch(e){return s}}(),i=Function.prototype.toString,r=function(...e){if(Y(this))return;const s=!!Y(this)&&t.get(this),n=this===r?i:s||this;return i.apply(n,e)};Function.prototype.toString=r;const o="prototype",a=s.EventTarget?s.EventTarget[o].dispatchEvent:{};return[["Document."+o+".documentElement",s.Document[o],"documentElement"],["Element."+o+".shadowRoot",s.Element[o],"shadowRoot"],["Node."+o+".nodeType",s.Node[o],"nodeType"],["eval",s,"eval"],["Object.is",s.Object,"is"],["Array."+o+"e.slice",s.Array[o],"slice"],["Document."+o+".querySelectorAll",s.Document[o],"querySelectorAll"],["Document."+o+".createElement",s.Document[o],"createElement"],["EventTarget."+o+".dispatchEvent",a,"dispatchEvent"],["Promise."+o+"e.constructor",s.Promise[o],"constructor"]].forEach((function([i,r,o]){const a=Object.getOwnPropertyDescriptor(r,o),c=a&&(a.get||a.set);if(!a)return;if(c){if(!a.get)return}else if("object"!=typeof a.value&&"function"!=typeof a.value)return;const d=function(...t){const r={d:Date.now(),pnow:g(),n:i,st:(n.Error||s.Error)("FriendlyCaptcha_DummyTrace").stack||""};return e.push(r),(c?a.get:a.value).apply(this,t)};try{const e=c?a.get?a.get():void 0:a.value();e&&(d.length=e.length,d.name=e.name)}catch(h){}try{Object.defineProperty(r,o,{...a,[c?"get":"value"]:d}),t.set(d,c?a.get:a.value)}catch(h){}})),function(){return e.splice(0,e.length)}}(),j="addEventListener",$=Math,q=class{constructor(){this.rn=0,this.i=0,this.smel={n:0,ts:0,d:0};const e="mouse",t=this.smel,s=s=>{t.n||(t.fts=s.timeStamp,t.fxy=[s.clientX,s.clientY,s.screenX,s.screenY]),t.n++,s.type===e+"leave"&&(t.d+=s.timeStamp-t.ts),t.ts=s.timeStamp,t.xy=[s.clientX,s.clientY]},n=document,i=n.body;i[j](e+"enter",s),i[j](e+"leave",s),this.bh={onoff:{kdu:f("keydown","keyup"),cse:f("compositionstart","compositionend"),mdu:f(e+"down",e+"up"),mle:f(e+"leave",e+"enter"),med:f(e+"enter",e+"down",!0),semd:f("scrollend",e+"down",!0,n),se:f("scroll","scrollend",!1,n),pdc:f("pointerdown","pointercancel",!0),mmc:f(e+"move","click",!0),tse:f("touchstart","touchend"),fikd:f("focusin","keydown",!0)},nev:y([e+"out","pointercancel","focus","focusin","blur","visibilitychange","copy","paste","cut","contextmenu","click","auxclick","wheel","resize"]),nk:w(),mov:this.setupMovementMetrics(),dm:this.setupMotionMetrics(),do:this.setupOrientationMetrics()}}setupMovementMetrics(){let e,t=[];const s=p(),n=p(),i=p(),r={t:s.s,v:i.s,d:n.s,ns:0},o=document.body,a=()=>{const o=t[t.length-1];if(t.length>=200||o&&(o[0]&&this.tm.timeStamp===o[1]||!o[0]&&this.mm.timeStamp===o[1])){if(clearInterval(e),e=void 0,1===t.length)return r.ns++,void(t=[]);const a=t[0];s.add(o[1]-a[1]),n.add(v(o[2],a[2],o[3],a[3]));for(let e=1;e<t.length;e++){const s=t[e],n=t[e-1],r=1e3*v(s[2],n[2],s[3],n[3]),o=s[1]-n[1];i.add(r/o)}return void(t=[])}let a=0;if(o?a=o[0]:this.mm&&this.tm?a=this.mm.timeStamp>this.tm.timeStamp?0:1:this.mm||(a=1),a){const e=this.tm.touches[0];e&&t.push([1,this.tm.timeStamp,e.screenX,e.screenY])}else t.push([0,this.mm.timeStamp,this.mm.screenX,this.mm.screenY])};o[j]("mousemove",(t=>{this.mm=t,void 0===e&&(a(),e=setInterval(a,50))}));let c=-1;return o[j]("touchmove",(t=>{this.tm=t;const s=t.touches[0];if(s){const e=s.radiusX+1.234*s.radiusY;e!==c&&(c=e,this.rn++)}void 0===e&&(a(),e=setInterval(a,50))})),r}setupMotionMetrics(){const e=p(),t=p(),s={n:0,ts:0,ac:e.s,rr:t.s,i:0,g:!1};return window[j]("devicemotion",(n=>{s.ts=n.timeStamp,s.i=n.interval,s.g=!n.acceleration;const i=n.acceleration||n.accelerationIncludingGravity;i&&e.add(_(i.x,i.y,i.z));const r=n.rotationRate;r&&t.add(_(r.alpha,r.beta,r.gamma))})),s}setupOrientationMetrics(){const e=p(),t=p(),s={fts:0,ts:0,gd:e.s,bd:t.s};let n;return window[j]("deviceorientation",(i=>{null!=i.gamma&&null!=i.beta&&null!=i.alpha&&(s.ts=i.timeStamp,s.a=i.alpha,s.b=i.beta,s.g=i.gamma,n?(e.add(S(i.gamma,s.g)),t.add(S(s.b,i.beta))):(s.fts=s.ts,n=!0))})),s}gmm(){const e=this.mm;return e&&{xy:[e.clientX,e.clientY,e.screenX,e.screenY,e.offsetX,e.offsetY,e.pageX,e.pageY,e.movementX,e.movementY],ts:e.timeStamp}}gtm(){const e=this.tm,t=e&&e.touches,s=t&&t[0];return e&&s&&{id:s.identifier,xy:[s.clientX,s.clientY,s.screenX,s.screenY,s.pageX,s.pageY],r:[s.radiusX,s.radiusX,s.rotationAngle,s.force],n:t.length,ts:e.timeStamp,rn:this.rn}}get(e){const t=document.body,s=window,n=s.performance;return{v:1,i:++this.i,hl:history.length,fe:!!window.frameElement,wid:e,sc:parseInt(h(!1)),sid:l(),conv:0,t:{pnow:g(),pto:n&&n.timeOrigin||0,ts:Date.now()},dims:{d:[s.innerWidth,s.innerHeight,s.outerWidth,s.outerHeight,s.screenX,s.screenY,s.pageXOffset,s.pageYOffset,t.clientWidth,t.clientHeight],dpr:s.devicePixelRatio},mel:this.smel,mm:this.gmm(),tm:this.gtm(),bh:this.bh,stack:(new Error).stack||"",trc:U()}}},B={eu:"https://eu.frcapi.com/api/v2/captcha",global:"https://global.frcapi.com/api/v2/captcha"},H="FrcFrameId",z=0;window.frcaptcha=new class{constructor(e={}){this.agents=new Map,this.agentState=new Map,this.widgets=new Map,this._attached=s(),this.attached=this._attached.promise,this.signals=R||(R=new q),this.baseURL=b(e.apiEndpoint||function(){const e=document.querySelector('meta[name="frc-api-endpoint"]');if(e)return e.content;const t=document.currentScript;if(t){const e=t.dataset.frcApiEndpoint;if(e)return e}const s=document.querySelector(".frc-captcha[data-api-endpoint]");if(s){const e=s.dataset.apiEndpoint;if(e)return e}}()),(k=k||new A).addOrigin(r(this.baseURL)),k.listen((e=>this.onReceiveMessage(e))),this.bus=k,++z>1&&console.warn("Multiple Friendly Captcha SDKs created, this is not recommended. Please use a single SDK instance."),!1!==e.startAgent&&this.ensureAgentIFrame(),this.setupPeriodicRefresh()}onReceiveMessage(e){if("root_set_response"===e.type){const t=this.widgets.get(e.widget_id);if(!t)return void(1===z&&console.warn(`Received set response message for widget ${e.widget_id} that doesn't exist`));t.setState(e)}else if(n(e.type,"root_store"))this.handleStoreMessage(e);else if("root_signals_get"===e.type)this.handleSignalsGetMessage(e);else if("widget_reset"===e.type){const t=this.widgets.get(e.from_id);if(!t)return void(1===z&&console.warn(`Received reset message for widget ${e.from_id} that doesn't exist`));t.reset({trigger:"widget"})}}handleSignalsGetMessage(e){const t=this.signals.get(e.widget_id);this.bus.send({type:"root_signals_get_reply",from_id:"",to_id:e.from_id,_frc:1,rid:e.rid,value:t})}handleStoreMessage(e){const t=e.from_id,s=this.agentState.get(t);s?"root_store_get"===e.type?s.store.get(e.key,{p:e.p}).then((n=>{this.bus.send({type:"root_store_get_reply",from_id:"",to_id:t,_frc:1,rid:e.rid,value:n,sa:s.store.hasSA()})})):"root_store_set"===e.type&&s.store.set(e.key,e.value,{p:e.p}).then((()=>{this.bus.send({type:"root_store_set_reply",from_id:"",to_id:t,_frc:1,rid:e.rid,sa:s.store.hasSA()})})):console.error(`Store not found ${t}`)}getAPIUrls(e){if(e&&"string"!=typeof e)return{agent:e.agent,widget:e.widget};let t=e||this.baseURL;return{agent:t+"/agent",widget:t+"/widget"}}ensureAgentIFrame(e){const t=this.getAPIUrls(e).agent,s=r(t);let n=document.getElementsByClassName(X);for(let i=0;i<n.length;i++){const e=n[i];if(r(e.src)===s&&e.dataset[H])return e.dataset[H]}const a="a_"+o(12),c=function(e,t,s){const n={origin:document.location.origin,sess_id:l(),sess_c:h(!0),comm_id:t,sdk_v:"0.1.6",v:"1",agent_id:t,ts:Date.now().toString()},r=document.createElement("iframe");r.className=X,r.dataset[W]=t,r.src=s+"?"+i(n),r.frcSDK=e;const o=r.style;return o.width=o.height=o.border=o.visibility="0",o.display="none",r}(this,a,t);this.agents.set(s,c),this.agentState.set(a,{store:new P(s),origin:s}),document.body.appendChild(c);let d=1;const m=()=>{this.bus.registerTargetIFrame("agent",a,c,3e3*d).then((e=>{if("timeout"===e){if(d>15)return console.error("[Friendly Captcha] Failed to load agent iframe after 15 retries."),c.remove(),void this.agents.delete(s);console.warn("[Friendly Captcha] Retrying agent iframe load."),c.src+="&retry="+d++,m()}}))};return m(),a}setupPeriodicRefresh(){let e=1;setInterval((()=>{const t="&expire="+e++;this.agents.forEach((e=>{e.src+=t})),this.widgets.forEach((e=>{e.getElement().querySelector("iframe").src+=t}))}),1296e5)}attach(t){void 0===t&&(t=e()),Array.isArray(t)||t instanceof NodeList||(t=[t]);const s=[];for(let e=0;e<t.length;e++){const n=t[e];if(n&&!n.dataset.attached){const e=n.dataset,t={element:n,sitekey:e.sitekey,formFieldName:e.formFieldName,apiEndpoint:e.apiEndpoint,language:e.lang,theme:e.theme,startMode:e.start};s.push(this.createWidget(t)),n.dataset.attached="1"}}const n=this.getAllWidgets();return this._attached.resolve(n),this.attached=Promise.resolve(n),s}createWidget(e){const n=e.apiEndpoint&&b(e.apiEndpoint),a=this.ensureAgentIFrame(n),c="w_"+o(12),d=e=>{const t={from_id:c,to_id:a,_frc:1};this.bus.send(u(t,e))},g={onDestroy:()=>{d({type:"root_destroy_widget"}),this.bus.removeTarget(c),this.widgets.delete(c),e.element.remove()},onReset:()=>{d({type:"root_reset_widget"})},onTrigger:e=>{d({type:"root_trigger_widget",trigger:e.trigger})}},p=s(),f=new L({id:c,createOpts:e,callbacks:g,registered:p.promise});this.widgets.set(c,f);const y=this.getAPIUrls(n).widget,w=function(e,t,s,n){const r=document.createElement("iframe");let o=n.language;o&&"html"!==o||(o=function(e){for(;!e.lang;)if(!(e=e.parentElement))return null;return e.lang}(n.element)||"");const a={origin:document.location.origin,sess_id:l(),sess_c:h(!0),comm_id:t,sdk_v:"0.1.6",v:"1",agent_id:e,lang:o,sitekey:n.sitekey||"",ts:Date.now().toString()};n.theme&&(a.theme=n.theme),N&&(r.allow="clipboard-write"),r.frameBorder="0",r.src=s+"?"+i(a),r.className="frc-i-widget",r.dataset[W]=t;const c=r.style;return c.border=c.visibility="0",c.position="absolute",c.height=c.width="100%",c.display="none",n.element.appendChild(r),r}(a,c,y,e),v=function(e){const t=document.createElement("div");t.classList.add("frc-widget-placeholder");const s=t.style,n="dark"===e.theme||"auto"===e.theme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return s.color=n?"#fff":"#222",s.backgroundColor=n?"#171717":"#fafafa",s.borderRadius="4px",s.border="1px solid",s.borderColor="#ddd",s.padding="8px",s.height=s.width="100%",s.fontSize="14px",m(s),e.element.appendChild(t),t}(e);!function(e){const s=t;s(e,"position","relative"),s(e,"height","70px"),s(e,"padding","0"),s(e,"width","316px"),s(e,"maxWidth","100%"),s(e,"maxHeight","100%"),s(e,"overflow","hidden"),s(e,"borderRadius","4px")}(e.element),function(e){const t=document.createElement("div");t.classList.add("frc-banner");const s=t.style;s.position="absolute",s.bottom="2px",s.right="6px",s.lineHeight="1";const n=document.createElement("a");n.href="https://friendlycaptcha.com",n.rel="noopener";const i=n.style;m(i),i.fontSize="10px",i.color="#777",i.letterSpacing="-0.0125rem",n.target="_blank",n.textContent="Friendly Captcha",n.onmouseenter=()=>i.textDecoration="underline",n.onmouseleave=()=>i.textDecoration="none",t.appendChild(n),e.element.appendChild(t)}(e);const _=v.style;v.textContent="Anti-Robot check connecting...";let S=1;const E=()=>{this.bus.registerTargetIFrame("widget",c,w,2500*S+2e3).then((t=>{if("timeout"===t){if(S>4)return console.error("[Friendly Captcha] Failed to load widget iframe after 4 retries."),f.setState({state:"error",response:".ERROR",error:{code:"network_error",detail:"Widget load timeout, stopped retrying"}}),_.borderColor="#f00",_.fontSize="12px",void(v.textContent=`Anti-Robot check failed to connect to page or ${r(w.src)}\nCheck your connection and try again.`);_.backgroundColor="#fee",_.color="#222",v.textContent=`Anti-Robot check took too long to connect.\n\nRetrying... (${S})`,console.warn(`[Friendly Captcha] Retrying widget ${c} iframe load.`),f.setState({state:"error",response:".ERROR",error:{code:"network_error",detail:"Widget load timeout, will retry."}}),w.src+="&retry="+S++,E()}else"registered"===t&&(e.element.removeChild(v),w.style.display="")}))};return E(),p.resolve(),f}getAllWidgets(){const e=[];return this.widgets.forEach((t=>{e.push(t)})),e}getWidgetById(e){return this.widgets.get(e)}clear(){this.widgets.forEach((e=>{e.destroy()})),this.agents.forEach((e=>{e.remove()})),this.agents.clear()}},M=function(){const t=e();window.frcaptcha.attach(t)},"loading"!==document.readyState?M():document.addEventListener("DOMContentLoaded",M)})();
/*!
 * Copyright (c) Friendly Captcha GmbH 2023.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */