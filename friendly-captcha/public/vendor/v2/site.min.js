"use strict";(()=>{function e(){return document.querySelectorAll(".frc-captcha")}function t(e,t,n){""===e.style[t]&&(e.style[t]=n)}function n(e){let t,n;const s=new Promise(((e,s)=>{t=e,n=s}));return e&&e(t,n),{promise:s,resolve:t,reject:n}}function s(e,t){return 0===e.lastIndexOf(t,0)}function i(e){let t=[];const n=Object.keys(e),s=encodeURIComponent;for(let i=0;i<n.length;i++)t.push(`${s(n[i])}=${s(e[n[i]])}`);return t.join("&")}function r(e){const t=document.location;if(s(e,"/")||s(e,"."))return t.origin?t.origin:t.protocol+"//"+t.host;const n=e.match(A);if(!n)throw new Error("Invalid URL: "+e);return n[1]}function o(e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){let n="";for(let s=0;s<e;s++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function a(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function c(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const s=a(n);return(e,n)=>s.then((s=>n(s.transaction(t,e).objectStore(t))))}function d(){return R||(R=c("keyval-store","keyval")),R}function h(e){if(!T){let n=0;try{n=parseInt(sessionStorage.getItem(I)||"",10)}catch(t){}isNaN(n)&&(n=0),e&&n++,O=n.toString();try{sessionStorage.setItem(I,O)}catch(t){}}return O}function l(){let e;try{e=sessionStorage.getItem(D)}catch(t){return P}return e||(e=o(12),sessionStorage.setItem(D,e)),e}function m(e){e.textDecoration=e.fontStyle="none",e.fontWeight="500",e.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',e.lineHeight="1",e.letterSpacing="-0.0125rem"}function g(){const e=window.performance;return e?e.now():0}function u(e,...t){for(let s=0;s<t.length;s++){const i=t[s];for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e}function p(){const e=[0,0,0,0,0,0,0];return{s:e,add(t){const n=++e[0],s=t-e[1],i=s/n,r=i*i,o=s*i*(n-1);e[1]+=i,e[4]+=o*r*(n*n-3*n+3)+6*r*e[2]-4*i*e[3],e[3]+=o*i*(n-2)-3*i*e[2],e[2]+=o,1==n?e[5]=e[6]=t:(t<e[5]&&(e[5]=t),t>e[6]&&(e[6]=t))}}}function f(){return/Android/i.test(navigator.userAgent)}function y(e,t,n=!1,s=document.body){const i=p();let r,o=!1;return s[j](e,(e=>{o&&!n||(r=e.timeStamp,o=!0)})),s[j](t,(e=>{o&&(i.add(e.timeStamp-r),o=!1)})),i.s}function w(e){const t=[];for(let n=0;n<e.length;n++)t.push(0),document[j](e[n],(()=>t[n]++));return t}function v(){const e=[0,0,0,0,0,0,0,0],t={8:1,46:1,9:2,45:3,17:4,13:5,37:6,38:6,39:6,40:6,33:7,34:7};return document[j]("keydown",(n=>{const s=n.keyCode;t[s]?e[t[s]]++:s>=112&&s<=123&&e[0]++})),e}function _(e,t,n,s){return $.sqrt($.pow(e-t,2)+$.pow(n-s,2))}function b(e,t,n){return $.sqrt($.pow(e,2)+$.pow(t,2)+$.pow(n,2))}function E(e,t){let n=t-e;return n+=n>180?-360:n<-180?360:0,n}function S(e){return e?H[e]||e:H.global}var R,k,M,x,A=/^((?:\w+:)?\/\/([^\/]+))/,C=class{constructor(e){this.ready=!1,this.buffer=[],this.id=e.id,this.type=e.type,this.element=e.element,this.onReady=e.onReady,this.origin=r(e.element.src)}send(e){this.ready?this.element.contentWindow.postMessage(e,this.origin):this.buffer.push(e)}setReady(e){this.onReady(),this.ready=e,this.ready&&this.flush()}flush(){for(let e=0;e<this.buffer.length;e++)this.element.contentWindow.postMessage(this.buffer[e],this.origin);this.buffer=[]}},F=class{constructor(){this.origins=new Set,this.targets={},this.answered=new Set,this.onReceiveRootMessage=()=>{},window.addEventListener("message",(e=>{this.onReceive(e)}))}listen(e){let t=this.onReceiveRootMessage;this.onReceiveRootMessage=n=>{t(n),e(n)}}addOrigin(e){this.origins.add(e)}send(e){if(e.from_id){const t=this.targets[e.from_id];if(!t)return void console.error(`[bus] Unexpected message from unknown sender ${e.from_id}`,e);"widget_announce"!==e.type&&"agent_announce"!==e.type||t.setReady(!0)}const t=e.rid;if(t){if(this.answered.has(t+e.to_id))return;this.answered.add(t+e.to_id)}if(""===e.to_id)return void this.onReceiveRootMessage(e);const n=this.targets[e.to_id];n?n.send(e):console.error(`[bus] Unexpected message to unknown target ${e.to_id}`,e)}onReceive(e){if(t=e.origin,n=this.origins,"*"!==t&&!n.has(t))return void console.debug("Friendly Captcha communication bus ignored message from origin "+e.origin,this.origins);var t,n;const s=e.data;s._frc&&this.send(s)}registerTarget(e){this.targets[e.id]=e}registerTargetIFrame(e,t,s,i){const r=n();let o=new Promise((e=>setTimeout((()=>e("timeout")),i)));const a=new C({id:t,element:s,type:e,onReady:()=>r.resolve("registered")});return this.registerTarget(a),Promise.race([r.promise,o])}removeTarget(e){delete this.targets[e]}},I="frc_sc",D="frc_sid",T=!1,O="0",P="__"+o(10),W=class{constructor(e){this.mem=new Map,this.storePrefix=e}setup(){return new Promise(((e,t)=>{if(void 0!==this._hasSA)return e(this._hasSA);try{indexedDB.open("")}catch(n){return e(this._hasSA=!1)}if(!document.hasStorageAccess)return e(this._hasSA=!0);document.hasStorageAccess().then((t=>(this._hasSA=t,this._hasSA?this.idb=c("friendlycaptcha","frc"):console.debug("FRC has no storage access"),e(this._hasSA)))).catch(t)}))}get(e,t){return this.setup().then((n=>{const s=this.storePrefix+"__"+e;if(t.p)return n?function(e,t=d()){return t("readonly",(t=>a(t.get(e))))}(s,this.idb):this.mem.get(e);try{const e=sessionStorage.getItem(s);return null===e?void 0:e}catch(i){}return this.mem.get(e)}))}set(e,t,n){return this.setup().then((s=>{const i=this.storePrefix+"__"+e;if(n.p){if(s)return function(e,t,n=d()){return n("readwrite",(n=>(n.put(t,e),a(n.transaction))))}(i,t,this.idb);void 0===t?this.mem.delete(e):this.mem.set(e,t)}else try{void 0===t?(this.mem.delete(e),sessionStorage.removeItem(i)):(this.mem.set(e,t),sessionStorage.setItem(i,t))}catch(r){}}))}hasSA(){return this._hasSA}},N="undefined"!=typeof navigator&&void 0!==navigator.userAgentData,L="FrcFrameId",X="frc-i-agent",Y=class{constructor(e){this.state="init",this.response=".UNINITIALIZED",this.focusEventPending=!1,this.isDestroyed=!1,this.id=e.id;const t=e.createOpts;if(this.e=t.element,this.ready=e.registered,!this.e)throw new Error("No element provided to mount widget under.");if(this.e.frcWidget=this,this.formFieldName=void 0===t.formFieldName?"frc-captcha-response":t.formFieldName,this.sitekey=t.sitekey,this._reset=e.callbacks.onReset,this._destroy=e.callbacks.onDestroy,this._trigger=e.callbacks.onTrigger,this.startMode=e.createOpts.startMode||"focus",null!==this.formFieldName){const e=document.createElement("input");e.type="hidden",e.style.display="none",e.name=this.formFieldName,this.hiddenFormEl=e,this.e.appendChild(e)}this.setState({response:".UNCONNECTED",state:"init"}),this.ready.then((()=>{this.handleStartMode()}))}handleStartMode(){if("focus"!==this.startMode||this.focusEventPending||this.isDestroyed)"auto"===this.startMode&&this.trigger("auto");else{const t=function(e){for(;"FORM"!==e.tagName;)if(!(e=e.parentElement))return null;return e}(this.e);t&&(this.focusEventPending=!0,e=e=>{this.trigger("focus",{ev:e}),this.focusEventPending=!1},t.addEventListener("focusin",e,{once:!0,passive:!0}))}var e}reset(e={trigger:"root"}){if(this.isDestroyed)throw new Error("Can not reset destroyed widget.");this.setState({response:".RESET",state:"reset",resetTrigger:e.trigger}),this._reset(e),this.handleStartMode()}destroy(){this.isDestroyed=!0,this.hiddenFormEl&&this.hiddenFormEl.remove(),this.hiddenFormEl=void 0,this.setState({response:".DESTROYED",state:"destroyed"}),this._destroy()}trigger(e,t={}){if(this.isDestroyed)throw new Error("Can not start destroyed widget.");const n=function(e,t,n,s){const i=g(),r=n.getBoundingClientRect(),o={v:1,tt:e,pnow:i,sm:t,el:{bcr:[r.left,r.top,r.width,r.height],con:document.body.contains(n)},stack:(new Error).stack||"",we:!!window.event,weit:!!window.event&&!!window.event.isTrusted};return s&&(o.ev={ts:s.timeStamp,rt:!!s.relatedTarget,eot:!!s.explicitOriginalTarget,it:s.isTrusted}),o}(e,this.startMode,this.e,t.ev);this._trigger({trigger:n})}start(){this.trigger("programmatic")}setState(e){const t=this.state!==e.state;this.response=e.response,this.state=e.state,this.hiddenFormEl&&!1!==this.e.isConnected&&(this.hiddenFormEl.value=e.response),t&&this.dispatchWidgetEvent({name:"frc:widget.statechange",error:e.error}),"expired"===this.state?this.dispatchWidgetEvent({name:"frc:widget.expire"}):"completed"===this.state?this.dispatchWidgetEvent({name:"frc:widget.complete"}):"error"===this.state?this.dispatchWidgetEvent({name:"frc:widget.error",error:e.error}):"reset"===this.state&&this.dispatchWidgetEvent({name:"frc:widget.reset",trigger:e.resetTrigger})}dispatchWidgetEvent(e){const t={response:this.response,state:this.state,id:this.id};u(t,e),function(e,t){let n;"function"==typeof window.CustomEvent?n=new CustomEvent(t.name,{bubbles:!0,detail:t}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t.name,!0,!1,t)),e.dispatchEvent(n)}(this.e,t)}addEventListener(e,t,n){this.e.addEventListener(e,t,n)}removeEventListener(e,t,n){this.e.removeEventListener(e,t,n)}getState(){return this.state}getResponse(){return this.response}getElement(){return this.e}},U=function(){const e=[],t=new Map,n=window,s=function(){try{const e=document.createElement("iframe");e.style.display="none",(document.body||document.head).appendChild(e);const t=e?e.contentWindow:0;return e.remove(),t||n}catch(e){return n}}(),i=Function.prototype.toString,r=function(...e){const n="function"==typeof this&&t.get(this),s=this===r?i:n||this;return i.apply(s,e)};Function.prototype.toString=r;const o="prototype",a=n.EventTarget?n.EventTarget[o].dispatchEvent:{};return[["Document."+o+".documentElement",n.Document[o],"documentElement"],["Element."+o+".shadowRoot",n.Element[o],"shadowRoot"],["Node."+o+".nodeType",n.Node[o],"nodeType"],["eval",n,"eval"],["Object.is",n.Object,"is"],["Array."+o+".slice",n.Array[o],"slice"],["Document."+o+".querySelectorAll",n.Document[o],"querySelectorAll"],["Document."+o+".createElement",n.Document[o],"createElement"],["EventTarget."+o+".dispatchEvent",a,"dispatchEvent"],["Promise."+o+"e.constructor",n.Promise[o],"constructor"]].forEach((function([i,r,o]){const a=Object.getOwnPropertyDescriptor(r,o),c=a&&(a.get||a.set);if(!a)return;if(c){if(!a.get)return}else if("object"!=typeof a.value&&"function"!=typeof a.value)return;const d=function(...t){const r={d:Date.now(),pnow:g(),n:i,st:(s.Error||n.Error)("FriendlyCaptcha_DummyTrace").stack||""};return e.push(r),(c?a.get:a.value).apply(this,t)};try{const e=c?a.get?a.get():void 0:a.value();e&&(d.length=e.length,d.name=e.name)}catch(h){}try{const e=u({},a);c?e.get=d:e.value=d,Object.defineProperty(r,o,e),t.set(d,c?a.get:a.value)}catch(h){}})),function(){return e.splice(0,e.length)}}(),j="addEventListener",$=Math,q=class{constructor(){this.rn=0,this.i=0,this.smel={n:0,ts:0,d:0};const e="mouse",t=this.smel,n=n=>{t.n||(t.fts=n.timeStamp,t.fxy=[n.clientX,n.clientY,n.screenX,n.screenY]),t.n++,n.type===e+"leave"&&(t.d+=n.timeStamp-t.ts),t.ts=n.timeStamp,t.xy=[n.clientX,n.clientY]},s=document,i=s.body;i[j](e+"enter",n),i[j](e+"leave",n),this.bh={onoff:{kdu:y("keydown","keyup"),cse:y("compositionstart","compositionend"),mdu:y(e+"down",e+"up"),mle:y(e+"leave",e+"enter"),med:y(e+"enter",e+"down",!0),semd:y("scrollend",e+"down",!0,s),se:y("scroll","scrollend",!1,s),pdc:y("pointerdown","pointercancel",!0),mmc:y(e+"move","click",!0),tse:y("touchstart","touchend"),fikd:y("focusin","keydown",!0)},nev:w([e+"out","pointercancel","focus","focusin","blur","visibilitychange","copy","paste","cut","contextmenu","click","auxclick","wheel","resize"]),nk:v(),mov:this.setupMovementMetrics(),dm:this.setupMotionMetrics(),do:this.setupOrientationMetrics()}}setupMovementMetrics(){let e,t=[];const n=p(),s=p(),i=p(),r={t:n.s,v:i.s,d:s.s,ns:0},o=document.body,a=()=>{const o=t[t.length-1];if(t.length>=200||o&&(o[0]&&this.tm.timeStamp===o[1]||!o[0]&&this.mm.timeStamp===o[1])){if(clearInterval(e),e=void 0,1===t.length)return r.ns++,void(t=[]);const a=t[0];n.add(o[1]-a[1]),s.add(_(o[2],a[2],o[3],a[3]));for(let e=1;e<t.length;e++){const n=t[e],s=t[e-1],r=1e3*_(n[2],s[2],n[3],s[3]),o=n[1]-s[1];i.add(r/o)}return void(t=[])}let a=0;if(o?a=o[0]:this.mm&&this.tm?a=this.mm.timeStamp>this.tm.timeStamp?0:1:this.mm||(a=1),a){const e=this.tm.touches[0];e&&t.push([1,this.tm.timeStamp,e.screenX,e.screenY])}else t.push([0,this.mm.timeStamp,this.mm.screenX,this.mm.screenY])};o[j]("mousemove",(t=>{this.mm=t,void 0===e&&(a(),e=setInterval(a,50))}));let c=-1;return o[j]("touchmove",(t=>{this.tm=t;const n=t.touches[0];if(n){const e=n.radiusX+1.234*n.radiusY;e!==c&&(c=e,this.rn++)}void 0===e&&(a(),e=setInterval(a,50))})),r}setupMotionMetrics(){const e=p(),t=p(),n={n:0,ts:0,ac:e.s,rr:t.s,i:0,g:!1};return f()?(window[j]("devicemotion",(s=>{n.ts=s.timeStamp,n.i=s.interval,n.g=!s.acceleration;const i=s.acceleration||s.accelerationIncludingGravity;i&&e.add(b(i.x,i.y,i.z));const r=s.rotationRate;r&&t.add(b(r.alpha,r.beta,r.gamma))})),n):n}setupOrientationMetrics(){const e=p(),t=p(),n={fts:0,ts:0,gd:e.s,bd:t.s};if(!f())return n;let s;return window[j]("deviceorientation",(i=>{null!=i.gamma&&null!=i.beta&&null!=i.alpha&&(n.ts=i.timeStamp,n.a=i.alpha,n.b=i.beta,n.g=i.gamma,s?(e.add(E(i.gamma,n.g)),t.add(E(n.b,i.beta))):(n.fts=n.ts,s=!0))})),n}gmm(){const e=this.mm;return e&&{xy:[e.clientX,e.clientY,e.screenX,e.screenY,e.offsetX,e.offsetY,e.pageX,e.pageY,e.movementX,e.movementY],ts:e.timeStamp}}gtm(){const e=this.tm,t=e&&e.touches,n=t&&t[0];return e&&n&&{id:n.identifier,xy:[n.clientX,n.clientY,n.screenX,n.screenY,n.pageX,n.pageY],r:[n.radiusX,n.radiusX,n.rotationAngle,n.force],n:t.length,ts:e.timeStamp,rn:this.rn}}get(e){const t=document.body,n=window,s=n.performance;return{v:1,i:++this.i,hl:history.length,fe:!!window.frameElement,wid:e,sc:parseInt(h(!1)),sid:l(),conv:0,t:{pnow:g(),pto:s&&s.timeOrigin||0,ts:Date.now()},dims:{d:[n.innerWidth,n.innerHeight,n.outerWidth,n.outerHeight,n.screenX,n.screenY,n.pageXOffset,n.pageYOffset,t.clientWidth,t.clientHeight],dpr:n.devicePixelRatio},mel:this.smel,mm:this.gmm(),tm:this.gtm(),bh:this.bh,stack:(new Error).stack||"",trc:U()}}},H={eu:"https://eu.frcapi.com/api/v2/captcha",global:"https://global.frcapi.com/api/v2/captcha"},B="FrcFrameId",z=0;window.frcaptcha=new class{constructor(e={}){this.agents=new Map,this.agentState=new Map,this.widgets=new Map,this._attached=n(),this.attached=this._attached.promise,this.signals=k||(k=new q),this.baseURL=S(e.apiEndpoint||function(){const e=document.querySelector('meta[name="frc-api-endpoint"]');if(e)return e.content;const t=document.currentScript;if(t){const e=t.dataset.frcApiEndpoint;if(e)return e}const n=document.querySelector(".frc-captcha[data-api-endpoint]");if(n){const e=n.dataset.apiEndpoint;if(e)return e}}()),(M=M||new F).addOrigin(r(this.baseURL)),M.listen((e=>this.onReceiveMessage(e))),this.bus=M,++z>1&&console.warn("Multiple Friendly Captcha SDKs created, this is not recommended. Please use a single SDK instance."),!1!==e.startAgent&&this.ensureAgentIFrame(),this.setupPeriodicRefresh()}onReceiveMessage(e){if("root_set_response"===e.type){const t=this.widgets.get(e.widget_id);if(!t)return void(1===z&&console.warn(`Received set response message for widget ${e.widget_id} that doesn't exist`));t.setState(e)}else if(s(e.type,"root_store"))this.handleStoreMessage(e);else if("root_signals_get"===e.type)this.handleSignalsGetMessage(e);else if("widget_reset"===e.type){const t=this.widgets.get(e.from_id);if(!t)return void(1===z&&console.warn(`Received reset message for widget ${e.from_id} that doesn't exist`));t.reset({trigger:"widget"})}}handleSignalsGetMessage(e){const t=this.signals.get(e.widget_id);this.bus.send({type:"root_signals_get_reply",from_id:"",to_id:e.from_id,_frc:1,rid:e.rid,value:t})}handleStoreMessage(e){const t=e.from_id,n=this.agentState.get(t);n?"root_store_get"===e.type?n.store.get(e.key,{p:e.p}).then((s=>{this.bus.send({type:"root_store_get_reply",from_id:"",to_id:t,_frc:1,rid:e.rid,value:s,sa:n.store.hasSA()})})):"root_store_set"===e.type&&n.store.set(e.key,e.value,{p:e.p}).then((()=>{this.bus.send({type:"root_store_set_reply",from_id:"",to_id:t,_frc:1,rid:e.rid,sa:n.store.hasSA()})})):console.error(`Store not found ${t}`)}getAPIUrls(e){if(e&&"string"!=typeof e)return{agent:e.agent,widget:e.widget};let t=e||this.baseURL;return{agent:t+"/agent",widget:t+"/widget"}}ensureAgentIFrame(e){const t=this.getAPIUrls(e).agent,n=r(t);let s=document.getElementsByClassName(X);for(let i=0;i<s.length;i++){const e=s[i];if(r(e.src)===n&&e.dataset[B])return e.dataset[B]}const a="a_"+o(12),c=function(e,t,n){const s={origin:document.location.origin,sess_id:l(),sess_c:h(!0),comm_id:t,sdk_v:"0.1.10",v:"1",agent_id:t,ts:Date.now().toString()},r=document.createElement("iframe");r.className=X,r.dataset[L]=t,r.src=n+"?"+i(s),r.frcSDK=e;const o=r.style;return o.width=o.height=o.border=o.visibility="0",o.display="none",r}(this,a,t);this.agents.set(n,c),this.agentState.set(a,{store:new W(n),origin:n}),document.body.appendChild(c);let d=1;const m=()=>{this.bus.registerTargetIFrame("agent",a,c,3e3*d).then((e=>{if("timeout"===e){if(d>15)return console.error("[Friendly Captcha] Failed to load agent iframe after 15 retries."),c.remove(),void this.agents.delete(n);console.warn("[Friendly Captcha] Retrying agent iframe load."),c.src+="&retry="+d++,m()}}))};return m(),a}setupPeriodicRefresh(){let e=1;setInterval((()=>{const t="&expire="+e++;this.agents.forEach((e=>{e.src+=t})),this.widgets.forEach((e=>{e.getElement().querySelector("iframe").src+=t}))}),1296e5)}attach(t){void 0===t&&(t=e()),Array.isArray(t)||t instanceof NodeList||(t=[t]);const n=[];for(let e=0;e<t.length;e++){const s=t[e];if(s&&!s.frcWidget){const e=s.dataset,t={element:s,sitekey:e.sitekey,formFieldName:e.formFieldName,apiEndpoint:e.apiEndpoint,language:e.lang,theme:e.theme,startMode:e.start};n.push(this.createWidget(t))}}const s=this.getAllWidgets();return this._attached.resolve(s),this.attached=Promise.resolve(s),n}createWidget(e){const s=e.apiEndpoint&&S(e.apiEndpoint),a=this.ensureAgentIFrame(s),c="w_"+o(12),d=e=>{const t={from_id:c,to_id:a,_frc:1};this.bus.send(u(t,e))},g={onDestroy:()=>{d({type:"root_destroy_widget"}),this.bus.removeTarget(c),this.widgets.delete(c),e.element.innerHTML="",e.element.removeAttribute("style")},onReset:()=>{d({type:"root_reset_widget"})},onTrigger:e=>{d({type:"root_trigger_widget",trigger:e.trigger})}},p=n(),f=new Y({id:c,createOpts:e,callbacks:g,registered:p.promise});this.widgets.set(c,f);const y=this.getAPIUrls(s).widget,w=function(e,t,n,s){const r=document.createElement("iframe");let o=s.language;o&&"html"!==o||(o=function(e){for(;!e.lang;)if(!(e=e.parentElement))return null;return e.lang}(s.element)||"");const a={origin:document.location.origin,sess_id:l(),sess_c:h(!0),comm_id:t,sdk_v:"0.1.10",v:"1",agent_id:e,lang:o,sitekey:s.sitekey||"",ts:Date.now().toString()};s.theme&&(a.theme=s.theme),N&&(r.allow="clipboard-write"),r.frameBorder="0",r.src=n+"?"+i(a),r.className="frc-i-widget",r.dataset[L]=t;const c=r.style;return c.border=c.visibility="0",c.position="absolute",c.height=c.width="100%",c.display="none",s.element.appendChild(r),r}(a,c,y,e),v=function(e){const t=document.createElement("div");t.classList.add("frc-widget-placeholder");const n=t.style,s="dark"===e.theme||"auto"===e.theme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return n.color=s?"#fff":"#222",n.backgroundColor=s?"#171717":"#fafafa",n.borderRadius="4px",n.border="1px solid",n.borderColor="#ddd",n.padding="8px",n.height=n.width="100%",n.fontSize="14px",m(n),e.element.appendChild(t),t}(e);!function(e){const n=t;n(e,"position","relative"),n(e,"height","70px"),n(e,"padding","0"),n(e,"width","316px"),n(e,"maxWidth","100%"),n(e,"maxHeight","100%"),n(e,"overflow","hidden"),n(e,"borderRadius","4px")}(e.element),function(e){const t=document.createElement("div");t.classList.add("frc-banner");const n=t.style;n.position="absolute",n.bottom="2px",n.right="6px",n.lineHeight="1";const s=document.createElement("a");s.href="https://friendlycaptcha.com",s.rel="noopener";const i=s.style;m(i),i.fontSize="10px",i.color="#777",i.letterSpacing="-0.0125rem",s.target="_blank",s.textContent="Friendly Captcha",s.onmouseenter=()=>i.textDecoration="underline",s.onmouseleave=()=>i.textDecoration="none",t.appendChild(s),e.element.appendChild(t)}(e);const _=v.style;v.textContent="Anti-Robot check connecting...";let b=1;const E=()=>{this.bus.registerTargetIFrame("widget",c,w,2500*b+2e3).then((t=>{if("timeout"===t){if(b>4)return console.error("[Friendly Captcha] Failed to load widget iframe after 4 retries."),f.setState({state:"error",response:".ERROR",error:{code:"network_error",detail:"Widget load timeout, stopped retrying"}}),_.borderColor="#f00",_.fontSize="12px",void(v.textContent=`Anti-Robot check failed to connect to page or ${r(w.src)}\nCheck your connection and try again.`);_.backgroundColor="#fee",_.color="#222",v.textContent=`Anti-Robot check took too long to connect.\n\nRetrying... (${b})`,console.warn(`[Friendly Captcha] Retrying widget ${c} iframe load.`),f.setState({state:"error",response:".ERROR",error:{code:"network_error",detail:"Widget load timeout, will retry."}}),w.src+="&retry="+b++,E()}else"registered"===t&&(e.element.removeChild(v),w.style.display="")}))};return E(),p.resolve(),f}getAllWidgets(){const e=[];return this.widgets.forEach((t=>{e.push(t)})),e}getWidgetById(e){return this.widgets.get(e)}clear(){this.widgets.forEach((e=>{e.destroy()})),this.agents.forEach((e=>{e.remove()})),this.agents.clear()}},x=function(){const t=e();window.frcaptcha.attach(t)},"loading"!==document.readyState?x():document.addEventListener("DOMContentLoaded",x)})();
/*!
 * Copyright (c) Friendly Captcha GmbH 2023.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */