function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e){if("object"!==_typeof(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_typeof(i)?i:String(i)),r)}var i}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(){"use strict";function e(){for(;s.length;)s[0](),s.shift()}function t(e){this.a=c,this.b=void 0,this.f=[];var t=this;try{e((function(e){r(t,e)}),(function(e){i(t,e)}))}catch(n){i(t,n)}}function n(e){return new t((function(t){t(e)}))}function r(e,t){if(e.a==c){if(t==e)throw new TypeError;var n=!1;try{var a=t&&t.then;if(null!=t&&"object"==typeof t&&"function"==typeof a)return void a.call(t,(function(t){n||r(e,t),n=!0}),(function(t){n||i(e,t),n=!0}))}catch(s){return void(n||i(e,s))}e.a=0,e.b=t,o(e)}}function i(e,t){if(e.a==c){if(t==e)throw new TypeError;e.a=1,e.b=t,o(e)}}function o(e){!function(e){s.push(e),1==s.length&&a()}((function(){if(e.a!=c)for(;e.f.length;){var t=(i=e.f.shift())[0],n=i[1],r=i[2],i=i[3];try{0==e.a?r("function"==typeof t?t.call(void 0,e.b):e.b):1==e.a&&("function"==typeof n?r(n.call(void 0,e.b)):i(e.b))}catch(o){i(o)}}}))}var a,s=[];a=function(){setTimeout(e)};var c=2;t.prototype.g=function(e){return this.c(void 0,e)},t.prototype.c=function(e,n){var r=this;return new t((function(t,i){r.f.push([e,n,t,i]),o(r)}))},window.Promise||(window.Promise=t,window.Promise.resolve=n,window.Promise.reject=function(e){return new t((function(t,n){n(e)}))},window.Promise.race=function(e){return new t((function(t,r){for(var i=0;i<e.length;i+=1)n(e[i]).c(t,r)}))},window.Promise.all=function(e){return new t((function(t,r){function i(n){return function(r){a[n]=r,(o+=1)==e.length&&t(a)}}var o=0,a=[];0==e.length&&t(a);for(var s=0;s<e.length;s+=1)n(e[s]).c(i(s),r)}))},window.Promise.prototype.then=t.prototype.c,window.Promise.prototype.catch=t.prototype.g)}(),"undefined"!=typeof Map&&Map.prototype.keys&&"undefined"!=typeof Set&&Set.prototype.keys||function(){function e(e,t){if(t==t)return e.indexOf(t);for(n=0,r=e.length;e[n]==e[n]&&++n!==r;);return n}var t,n,r,i,o,a,s={delete:function(n){return!!~(t=e(this.k,n))&&(this.k.splice(t,1),this.v.splice(t,1),--this.size,!0)},get:function(t){return this.v[e(this.k,t)]},set:function(n,r){return~(t=e(this.k,n))||(this.k[t=this.size++]=n),this.v[t]=r,this},has:function(t){return e(this.k,t)>-1},clear:function(){this.k.length=this.v.length=this.size=0},forEach:function(e,t){t&&(e=e.bind(t));for(var n=-1,r=this.size;++n!==r;)e(this.v[n],this.k[n],this)},entries:function(){var e=0,t=this;return{next:function(){return e!==t.size?{value:[t.k[e++],t.v[e]],done:!1}:{done:!0}}}},keys:function(){var e=0,t=this;return{next:function(){return e!==t.size?{value:t.k[e++],done:!1}:{done:!0}}}},values:function(){var e=0,t=this;return{next:function(){return e!==t.size?{value:t.v[e++],done:!1}:{done:!0}}}},toString:function(){return"[object Map]"}};WeakMap=Map=function(t){if(i=this.k=[],o=this.v=[],r=0,null!=t){if(a=Object(t),(n=+a.length)!=n)throw new TypeError("("+(t.toString||a.toString)()+") is not iterable");for(;n--;){if(!(a[n]instanceof Object))throw new TypeError("Iterator value "+a[n]+" is not an entry object");~e(i,a[n][0])||(i[r]=a[n][0],o[r++]=a[n][1])}i.reverse(),o.reverse()}this.size=r},Map.prototype=s,WeakSet=Set=function(t){if(i=this.k=this.v=[],r=0,null!=t){if(a=Object(t),(n=+a.length)!=n)throw new TypeError("("+(t.toString||a.toString)()+") is not iterable");for(;n--;)~e(i,a[n])||(i[r++]=a[n]);i.reverse()}this.size=r},Set.prototype={delete:function(n){return!!~(t=e(this.k,n))&&(this.k.splice(t,1),--this.size,!0)},add:function(n){return~(t=e(this.k,n))||(t=this.size++),this.k[t]=n,this},has:s.has,clear:s.clear,forEach:s.forEach,entries:s.entries,keys:s.keys,values:s.keys,toString:function(){return"[object Set]"}}}(),function(){function e(){return document.querySelectorAll(".frc-captcha")}function t(e,t,n){""===e.style[t]&&(e.style[t]=n)}function n(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function r(e){var t,n,r=new Promise((function(e,r){t=e,n=r}));return e&&e(t,n),{promise:r,resolve:t,reject:n}}function i(e,t){return 0===e.lastIndexOf(t,0)}function o(e){for(var t=[],n=Object.keys(e),r=encodeURIComponent,i=0;i<n.length;i++)t.push("".concat(r(n[i]),"=").concat(r(e[n[i]])));return t.join("&")}function a(e){var t=document.location;if(i(e,"/")||i(e,"."))return t.origin?t.origin:t.protocol+"//"+t.host;var n=e.match(O);if(!n)throw new Error("Invalid URL: "+e);return n[1]}function s(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function c(e){return new Promise((function(t,n){e.oncomplete=e.onsuccess=function(){return t(e.result)},e.onabort=e.onerror=function(){return n(e.error)}}))}function u(e,t){var n=indexedDB.open(e);n.onupgradeneeded=function(){return n.result.createObjectStore(t)};var r=c(n);return function(e,n){return r.then((function(r){return n(r.transaction(t,e).objectStore(t))}))}}function l(){return T||(T=u("keyval-store","keyval")),T}function d(e){if(!L){var t=0;try{t=parseInt(sessionStorage.getItem(I)||"",10)}catch(n){}isNaN(t)&&(t=0),e&&t++,N=t.toString();try{sessionStorage.setItem(I,N)}catch(n){}}return N}function f(){var e;try{e=sessionStorage.getItem(W)}catch(t){return V}return e||(e=s(12),sessionStorage.setItem(W,e)),e}function h(e){return e.toLowerCase().split("-")[0].split("_")[0]}function g(e){return e=h(e),-1!==H.indexOf(e)}function m(e){return e=h(e),(q[e]||q.en).title+" - Widget"}function v(e,t){return e=h(e),(q[e]||q.en)[t]}function p(e){e.textDecoration=e.fontStyle="none",e.fontWeight="500",e.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',e.lineHeight="1",e.letterSpacing="-0.0125rem"}function y(e){var t=e.language;return t&&"html"!==t||(t=function(e){for(;!e.lang||"string"!=typeof e.lang;)if(!(e=e.parentElement))return null;return e.lang}(e.element)||""),t}function b(){var e=window.performance;return e?e.now():0}function w(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function k(){var e=[0,0,0,0,0,0,0];return{s:e,add:function(t){var n=++e[0],r=t-e[1],i=r/n,o=i*i,a=r*i*(n-1);e[1]+=i,e[4]+=a*o*(n*n-3*n+3)+6*o*e[2]-4*i*e[3],e[3]+=a*i*(n-2)-3*i*e[2],e[2]+=a,1==n?e[5]=e[6]=t:(t<e[5]&&(e[5]=t),t>e[6]&&(e[6]=t))}}}function _(){return/Android/i.test(navigator.userAgent)}function S(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=k(),s=!1;return n((function(){(o=o||document.body)[G](e,(function(e){s&&!i||(r=e.timeStamp,s=!0)})),o[G](t,(function(e){s&&(a.add(e.timeStamp-r),s=!1)}))})),a.s}function E(e){for(var t=[],n=function(n){t.push(0),document[G](e[n],(function(){return t[n]++}))},r=0;r<e.length;r++)n(r);return t}function A(e,t,n,r){return Z.sqrt(Z.pow(e-t,2)+Z.pow(n-r,2))}function R(e,t,n){return Z.sqrt(Z.pow(e,2)+Z.pow(t,2)+Z.pow(n,2))}function C(e,t){var n=t-e;return n+(n>180?-360:n<-180?360:0)}function x(e){var t=e;return t?Q[t]&&(t=Q[t]):t=Q.global,a(t)}function M(){var e=document.querySelector('meta[name="frc-api-endpoint"]');if(e)return e.content;var t=document.currentScript;if(t){var n=t.dataset.frcApiEndpoint;if(n)return n}var r=document.querySelector(".frc-captcha[data-api-endpoint]");if(r){var i=r.dataset.apiEndpoint;if(i)return i}}function P(){var e=window.Intl;if(e&&e.DateTimeFormat){var t=new e.DateTimeFormat;if(t&&t.resolvedOptions)return t.resolvedOptions().timeZone}}var T,z,j,O=/^((?:\w+:)?\/\/([^\/]+))/,D=function(){function e(t){_classCallCheck(this,e),this.ready=!1,this.buffer=[],this.id=t.id,this.type=t.type,this.element=t.element,this.onReady=t.onReady,this.origin=a(t.element.src)}return _createClass(e,[{key:"send",value:function(e){this.ready?this.element.contentWindow.postMessage(e,this.origin):this.buffer.push(e)}},{key:"setReady",value:function(e){this.onReady(),this.ready=e,this.ready&&this.flush()}},{key:"flush",value:function(){for(var e=0;e<this.buffer.length;e++)this.element.contentWindow.postMessage(this.buffer[e],this.origin);this.buffer=[]}}]),e}(),F=function(){function e(){var t=this;_classCallCheck(this,e),this.origins=new Set,this.targets={},this.answered=new Set,this.onReceiveRootMessage=function(){},window.addEventListener("message",(function(e){t.onReceive(e)}))}return _createClass(e,[{key:"listen",value:function(e){var t=this.onReceiveRootMessage;this.onReceiveRootMessage=function(n){t(n),e(n)}}},{key:"addOrigin",value:function(e){this.origins.add(e)}},{key:"send",value:function(e){if(e.from_id){var t=this.targets[e.from_id];if(!t)return void console.error("[bus] Unexpected message from unknown sender ".concat(e.from_id),e);"widget_announce"!==e.type&&"agent_announce"!==e.type||t.setReady(!0)}var n=e.rid;if(n){if(this.answered.has(n+e.to_id))return;this.answered.add(n+e.to_id)}if(""!==e.to_id){var r=this.targets[e.to_id];r?r.send(e):console.error("[bus] Unexpected message to unknown target ".concat(e.to_id),e)}else this.onReceiveRootMessage(e)}},{key:"onReceive",value:function(e){if(t=e.origin,n=this.origins,"*"===t||n.has(t)){var t,n,r=e.data;r&&r._frc&&this.send(r)}}},{key:"registerTarget",value:function(e){this.targets[e.id]=e}},{key:"registerTargetIFrame",value:function(e,t,n,i){var o=r(),a=new Promise((function(e){return setTimeout((function(){return e("timeout")}),i)})),s=new D({id:t,element:n,type:e,onReady:function(){return o.resolve("registered")}});return this.registerTarget(s),Promise.race([o.promise,a])}},{key:"removeTarget",value:function(e){delete this.targets[e]}}]),e}(),I="frc_sc",W="frc_sid",L=!1,N="0",V="__"+s(10),X=function(){function e(t){_classCallCheck(this,e),this.mem=new Map,this.storePrefix=t}return _createClass(e,[{key:"setup",value:function(){var e=this;return new Promise((function(t,n){if(void 0!==e._hasSA)return t(e._hasSA);try{indexedDB.open("")}catch(r){return t(e._hasSA=!1)}if(!document.hasStorageAccess)return t(e._hasSA=!0);document.hasStorageAccess().then((function(n){return e._hasSA=n,e._hasSA?e.idb=u("friendlycaptcha","frc"):console.debug("FRC has no storage access"),t(e._hasSA)})).catch(n)}))}},{key:"get",value:function(e,t){var n=this;return this.setup().then((function(r){var i=n.storePrefix+"__"+e;if(t.p)return r?function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:l())("readonly",(function(t){return c(t.get(e))}))}(i,n.idb):n.mem.get(e);try{var o=sessionStorage.getItem(i);return null===o?void 0:o}catch(a){}return n.mem.get(e)}))}},{key:"set",value:function(e,t,n){var r=this;return this.setup().then((function(i){var o=r.storePrefix+"__"+e;if(n.p){if(i)return function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:l())("readwrite",(function(n){return n.put(t,e),c(n.transaction)}))}(o,t,r.idb);void 0===t?r.mem.delete(e):r.mem.set(e,t)}else try{void 0===t?(r.mem.delete(e),sessionStorage.removeItem(o)):(r.mem.set(e,t),sessionStorage.setItem(o,t))}catch(a){}}))}},{key:"hasSA",value:function(){return this._hasSA}}]),e}(),Y="undefined"!=typeof navigator&&void 0!==navigator.userAgentData,q={ar:{title:"التحقق من مكافحة الروبوتات",connecting:"التحقق من مكافحة الروبوتات قيد الاتصال…",retrying:"استغرق الاتصال بالتحقق من مكافحة الروبوتات وقتًا طويلاً.\n\nإعادة المحاولة…",failed:"فشل الاتصال بالتحقق من مكافحة الروبوتات."},bg:{title:"Проверка срещу роботи",connecting:"Зарежда се задачата…",retrying:"Неуспешно свързване.\n\nОпит за повторно свързване…",failed:"Неуспешно свързване."},ca:{title:"Verificació anti-robot",connecting:"Carregant el desafiament…",retrying:"Errada de conexió.\n\nReintentant…",failed:"Errada de conexió."},cs:{title:"Ověření proti robotům",connecting:"Připojování kontroly proti robotům…",retrying:"Připojení kontroly proti robotům trvalo příliš dlouho.\n\nOpakuji pokus…",failed:"Kontrola proti robotům se nepodařilo připojit."},da:{title:"Anti-robot-verifikation",connecting:"Anti-robot-kontrol forbinder…",retrying:"Anti-robot-kontrol tog for lang tid at oprette forbindelse.\n\nPrøver igen…",failed:"Anti-robot-kontrol kunne ikke oprette forbindelse."},nl:{title:"Anti-robotcheck",connecting:"Verbinden met Anti-robotcheck…",retrying:"Verbinden met Anti-robotcheck mislukt.\n\nOpnieuw aan het proberen…",failed:"Verbinden met Anti-robotcheck mislukt."},en:{title:"Anti-Robot verification",connecting:"Anti-Robot check connecting…",retrying:"Anti-Robot check took too long to connect.\n\nRetrying…",failed:"Anti-Robot check failed to connect."},fi:{title:"Robottien torjunnan vahvistus",connecting:"Robottien torjunnan tarkistus käynnissä…",retrying:"Robottien torjunnan tarkistus kesti liian kauan.\n\nYritetään uudelleen…",failed:"Robottien torjunnan tarkistus epäonnistui."},fr:{title:"Vérification anti-robot",connecting:"Connexion à la vérification anti-robot…",retrying:"La connexion à la vérification anti-robot a pris trop de temps.\n\nNouvelle tentative…",failed:"Échec de la connexion à la vérification anti-robot."},de:{title:"Anti-Roboter-Verifizierung",connecting:"Verbindung zur Anti-Roboter-Verifizierung wird hergestellt…",retrying:"Verbindung zur Anti-Roboter-Verifizierung hat zu lange gedauert.\n\nErneuter Versuch…",failed:"Verbindung zur Anti-Roboter-Verifizierung ist fehlgeschlagen."},hi:{title:"एंटी-रोबोट सत्यापन",connecting:"चुनौती लोड हो रही है…",retrying:"कनेक्शन विफल.\n\nपुनः प्रयास कर रहे हैं…",failed:"कनेक्शन विफल."},hu:{title:"Robotellenőrzés",connecting:"Robotellenőrzés csatlakozás…",retrying:"A robotellenőrzés túl sokáig tartott a csatlakozáshoz.\n\nÚjrapróbálom…",failed:"A robotellenőrzés nem tudott csatlakozni."},id:{title:"Verifikasi Anti-Robot",connecting:"Pemeriksaan Anti-Robot sedang terhubung…",retrying:"Pemeriksaan Anti-Robot memakan waktu terlalu lama untuk terhubung.\n\nMencoba lagi…",failed:"Pemeriksaan Anti-Robot gagal terhubung."},ja:{title:"ロボット防止認証",connecting:"チャレンジを読み込んでいます…",retrying:"接続失敗.\n\n再試行中…",failed:"接続失敗."},it:{title:"Verifica anti-robot",connecting:"Connessione verifica anti-robot in corso…",retrying:"La connessione alla verifica anti-robot ha richiesto troppo tempo.\n\nRiprovando…",failed:"Impossibile connettersi alla verifica anti-robot."},nb:{title:"Anti-robot-verifisering",connecting:"Laster inn utfordring…",retrying:"Klarte ikke å koble til.\n\nPrøver igjen…",failed:"Klarte ikke å koble til."},pl:{title:"Weryfikacja antyrobotowa",connecting:"Łączenie się z kontrolą antyrobotową…",retrying:"Łączenie się z kontrolą antyrobotową trwało zbyt długo. \n\nPonowna próba…",failed:"Nie udało się połączyć z kontrolą antyrobotową."},ro:{title:"Verificare anti-robot",connecting:"Se incarca testul…",retrying:"Conexiunea a esuat.\n\nReincercare…",failed:"Conexiunea a esuat."},pt:{title:"Verificação anti-robô",connecting:"Verificação anti-robô a ligar…",retrying:"A verificação anti-robô demorou demasiado tempo a ligar-se.\n\nA tentar novamente…",failed:"A verificação anti-robô não conseguiu ligar-se."},ru:{title:"Проверка антиробота",connecting:"Подключение к проверке антиробота…",retrying:"Подключение к проверке антиробота заняло слишком много времени.\n\nПовторяем попытку…",failed:"Не удалось подключиться к проверке антиробота."},sk:{title:"Overovanie proti robotom",connecting:"Pripojenie kontroly proti robotom…",retrying:"Pripojenie kontroly proti robotom trvalo príliš dlho.\n\nOpakujem pokus…",failed:"Pripojenie kontroly proti robotom sa nepodarilo."},sl:{title:"Preverjanje proti robotom",connecting:"Nalaganje izziva…",retrying:"Povezava ni uspela.\n\nPonovni poskus…",failed:"Povezava ni uspela."},es:{title:"Verificación antirrobot",connecting:"Conectando verificación antirrobot…",retrying:"La verificación antirrobot tardó demasiado en conectarse.\n\nReintentando…",failed:"Error al conectar la verificación antirrobot."},sv:{title:"Anti-robotverifiering",connecting:"Anti-robotverifiering ansluter…",retrying:"Anti-robotverifiering tog för lång tid att ansluta.\n\nFörsöker igen…",failed:"Anti-robotverifiering kunde inte ansluta."},th:{title:"การตรวจสอบป้องกันบอท",connecting:"กำลังโหลดการท้าทาย…",retrying:"เชื่อมต่อไม่สำเร็จ.\n\nกำลังลองใหม่…",failed:"เชื่อมต่อไม่สำเร็จ."},tr:{title:"Robot önleme doğrulaması",connecting:"Robot önleme kontrolü bağlanıyor…",retrying:"Robot önleme kontrolü bağlanmak için çok uzun sürdü.\n\nYeniden deniyor…",failed:"Robot önleme kontrolü bağlanamadı."},vi:{title:"Xác minh chống robot",connecting:"Kiểm tra robot đang kết nối…",retrying:"Kiểm tra chống robot mất quá nhiều thời gian để kết nối.\n\nĐang thử lại…",failed:"Kiểm tra chống robot không thể kết nối."},zh:{title:"反机器人验证",connecting:"反机器人验证正在连接…",retrying:"反机器人验证连接耗时过长。\n\n正在重试…",failed:"反机器人验证连接失败。"}},H=["ar","he","fa","ur","ps","sd","yi"],K="FrcFrameId",U="frc-i-agent",B=function(){function e(t){var n=this;_classCallCheck(this,e),this.state="init",this.response=".UNINITIALIZED",this.focusEventPending=!1,this.isDestroyed=!1,this.id=t.id;var r=t.createOpts;if(this.e=r.element,this.ready=t.registered,!this.e)throw new Error("No element provided to mount widget under.");if(this.e.frcWidget=this,this.formFieldName=void 0===r.formFieldName?"frc-captcha-response":r.formFieldName,this.sitekey=r.sitekey,this._reset=t.callbacks.onReset,this._destroy=t.callbacks.onDestroy,this._trigger=t.callbacks.onTrigger,this.startMode=t.createOpts.startMode||"focus",null!==this.formFieldName){var i=document.createElement("input");i.type="hidden",i.style.display="none",i.name=this.formFieldName,this.hiddenFormEl=i,this.e.appendChild(i)}this.setState({response:".UNCONNECTED",state:"init"}),this.ready.then((function(){n.handleStartMode()}))}return _createClass(e,[{key:"handleStartMode",value:function(){var e,t=this;if("focus"!==this.startMode||this.focusEventPending||this.isDestroyed)"auto"===this.startMode&&this.trigger("auto");else{var n=function(e){for(;"FORM"!==e.tagName;)if(!(e=e.parentElement))return null;return e}(this.e);n&&(this.focusEventPending=!0,e=function(e){t.trigger("focus",{ev:e}),t.focusEventPending=!1},n.addEventListener("focusin",e,{once:!0,passive:!0}))}}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{trigger:"root"};if(this.isDestroyed)throw new Error("Can not reset destroyed widget.");this.setState({response:".RESET",state:"reset",resetTrigger:e.trigger}),this._reset(e),this.handleStartMode()}},{key:"destroy",value:function(){this.isDestroyed=!0,this.hiddenFormEl&&this.hiddenFormEl.remove(),this.hiddenFormEl=void 0,this.setState({response:".DESTROYED",state:"destroyed"}),this._destroy()}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isDestroyed)throw new Error("Can not start destroyed widget.");var n=function(e,t,n,r){var i=b(),o=n.getBoundingClientRect(),a={v:1,tt:e,pnow:i,sm:t,el:{bcr:[o.left,o.top,o.width,o.height],con:document.body.contains(n)},stack:(new Error).stack||"",we:!!window.event,weit:!!window.event&&!!window.event.isTrusted};return r&&(a.ev={ts:r.timeStamp,rt:!!r.relatedTarget,eot:!!r.explicitOriginalTarget,it:r.isTrusted}),a}(e,this.startMode,this.e,t.ev);this._trigger({trigger:n})}},{key:"start",value:function(){this.trigger("programmatic")}},{key:"setState",value:function(e){var t=this.state!==e.state;this.response=e.response,this.state=e.state,this.hiddenFormEl&&!1!==this.e.isConnected&&(this.hiddenFormEl.value=e.response),t&&this.dispatchWidgetEvent({name:"frc:widget.statechange",error:e.error,mode:e.mode}),"expired"===this.state?this.dispatchWidgetEvent({name:"frc:widget.expire"}):"completed"===this.state?this.dispatchWidgetEvent({name:"frc:widget.complete"}):"error"===this.state?this.dispatchWidgetEvent({name:"frc:widget.error",error:e.error}):"reset"===this.state&&this.dispatchWidgetEvent({name:"frc:widget.reset",trigger:e.resetTrigger})}},{key:"dispatchWidgetEvent",value:function(e){var t={response:this.response,state:this.state,id:this.id};w(t,e),function(e,t){var n;"function"==typeof window.CustomEvent?n=new CustomEvent(t.name,{bubbles:!0,detail:t}):(n=document.createEvent("CustomEvent")).initCustomEvent(t.name,!0,!1,t),e.dispatchEvent(n)}(this.e,t)}},{key:"addEventListener",value:function(e,t,n){this.e.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){this.e.removeEventListener(e,t,n)}},{key:"getState",value:function(){return this.state}},{key:"getResponse",value:function(){return this.response}},{key:"getElement",value:function(){return this.e}}]),e}(),G="addEventListener",Z=Math,J=function(){function e(t){_classCallCheck(this,e),this.rn=0,this.i=0,this.smel={n:0,ts:0,d:0};var r,i,o="mouse",a=this.smel,s=function(e){a.n||(a.fts=e.timeStamp,a.fxy=[e.clientX,e.clientY,e.screenX,e.screenY]),a.n++,e.type===o+"leave"&&(a.d+=e.timeStamp-a.ts),a.ts=e.timeStamp,a.xy=[e.clientX,e.clientY]},c=document;n((function(){var e=c.body;e[G](o+"enter",s),e[G](o+"leave",s)})),this.bh={onoff:{kdu:S("keydown","keyup"),cse:S("compositionstart","compositionend"),mdu:S(o+"down",o+"up"),mle:S(o+"leave",o+"enter"),med:S(o+"enter",o+"down",!0),semd:S("scrollend",o+"down",!0,c),se:S("scroll","scrollend",!1,c),pdc:S("pointerdown","pointercancel",!0),mmc:S(o+"move","click",!0),tse:S("touchstart","touchend"),fikd:S("focusin","keydown",!0)},nev:E([o+"out","pointercancel","focus","focusin","blur","visibilitychange","copy","paste","cut","contextmenu","click","auxclick","wheel","resize"]),nk:(r=[0,0,0,0,0,0,0,0],i={8:1,46:1,9:2,45:3,17:4,13:5,37:6,38:6,39:6,40:6,33:7,34:7},document[G]("keydown",(function(e){var t=e.keyCode;i[t]?r[i[t]]++:t>=112&&t<=123&&r[0]++})),r),mov:this.setupMovementMetrics(),dm:this.setupMotionMetrics(),do:this.setupOrientationMetrics()},this.dep=t.disableEvalPatching||!1,this.takeTraceRecords=function(e){var t=[],n=new Map,r=window,i=function(){try{var e=document.createElement("iframe");e.style.display="none",(document.body||document.head).appendChild(e);var t=e?e.contentWindow:0;return e.remove(),t||r}catch(n){return r}}(),o=Function.prototype.toString,a=function(){for(var e="function"==typeof this&&n.get(this),t=this===a?o:e||this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return o.apply(t,i)};Function.prototype.toString=a;var s="prototype",c=r.EventTarget?r.EventTarget[s].dispatchEvent:{},u=[["Document."+s+".documentElement",r.Document[s],"documentElement"],["Element."+s+".shadowRoot",r.Element[s],"shadowRoot"],["Node."+s+".nodeType",r.Node[s],"nodeType"],["Object.is",r.Object,"is"],["Array."+s+".slice",r.Array[s],"slice"],["Document."+s+".querySelectorAll",r.Document[s],"querySelectorAll"],["Document."+s+".createElement",r.Document[s],"createElement"],["EventTarget."+s+".dispatchEvent",c,"dispatchEvent"]];return e.disableEvalPatching||u.push(["eval",r,"eval"]),u.forEach((function(e){var o,a=function(e){if(Array.isArray(e))return e}(o=e)||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,i,o,a=[],s=!0,c=!1;try{for(i=(t=t.call(e)).next;!(s=(n=i.call(t)).done)&&(a.push(n.value),3!==a.length);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(o)||function(e){if(e){if("string"==typeof e)return _arrayLikeToArray(e,3);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,3):void 0}}(o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0],c=a[1],u=a[2],l=Object.getOwnPropertyDescriptor(c,u),d=l&&(l.get||l.set);if(l){if(d){if(!l.get)return}else if("object"!==_typeof(l.value)&&"function"!=typeof l.value)return;var f=0,h=0,g=function(){var e=Date.now();if(e-f>=1e3&&(h=0,f=e),h<50){var n={d:e,pnow:b(),n:s,st:(i.Error||r.Error)("FriendlyCaptcha_DummyTrace").stack||""};t.length>2e4&&t.splice(0,1e3),t.push(n),h++}for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(d?l.get:l.value).apply(this,a)};try{var m=d?l.get?l.get():void 0:l.value();m&&(g.length=m.length,g.name=m.name)}catch(p){}try{var v=w({},l);d?v.get=g:v.value=g,Object.defineProperty(c,u,v),n.set(g,d?l.get:l.value)}catch(p){}}})),function(){return t.splice(0,t.length)}}(t)}return _createClass(e,[{key:"setupMovementMetrics",value:function(){var e=this,t=void 0,r=[],i=k(),o=k(),a=k(),s={t:i.s,v:a.s,d:o.s,ns:0},c=function(){var n=r[r.length-1];if(r.length>=200||n&&(n[0]&&e.tm.timeStamp===n[1]||!n[0]&&e.mm.timeStamp===n[1])){if(clearInterval(t),t=void 0,1===r.length)return s.ns++,void(r=[]);var c=r[0];i.add(n[1]-c[1]),o.add(A(n[2],c[2],n[3],c[3]));for(var u=1;u<r.length;u++){var l=r[u],d=r[u-1],f=1e3*A(l[2],d[2],l[3],d[3]),h=l[1]-d[1];a.add(f/h)}r=[]}else{var g=0;if(n?g=n[0]:e.mm&&e.tm?g=e.mm.timeStamp>e.tm.timeStamp?0:1:e.mm||(g=1),g){var m=e.tm.touches[0];m&&r.push([1,e.tm.timeStamp,m.screenX,m.screenY])}else r.push([0,e.mm.timeStamp,e.mm.screenX,e.mm.screenY])}},u=-1;return n((function(){var n=document.body;n[G]("mousemove",(function(n){e.mm=n,void 0===t&&(c(),t=setInterval(c,50))})),n[G]("touchmove",(function(n){e.tm=n;var r=n.touches[0];if(r){var i=r.radiusX+1.234*r.radiusY;i!==u&&(u=i,e.rn++)}void 0===t&&(c(),t=setInterval(c,50))}))})),s}},{key:"setupMotionMetrics",value:function(){var e=k(),t=k(),n={n:0,ts:0,ac:e.s,rr:t.s,i:0,g:!1};return _()?(window[G]("devicemotion",(function(r){n.ts=r.timeStamp,n.i=r.interval,n.g=!r.acceleration;var i=r.acceleration||r.accelerationIncludingGravity;i&&e.add(R(i.x,i.y,i.z));var o=r.rotationRate;o&&t.add(R(o.alpha,o.beta,o.gamma))})),n):n}},{key:"setupOrientationMetrics",value:function(){var e,t=k(),n=k(),r={fts:0,ts:0,gd:t.s,bd:n.s};return _()?(window[G]("deviceorientation",(function(i){null!=i.gamma&&null!=i.beta&&null!=i.alpha&&(r.ts=i.timeStamp,r.a=i.alpha,r.b=i.beta,r.g=i.gamma,e?(t.add(C(i.gamma,r.g)),n.add(C(r.b,i.beta))):(r.fts=r.ts,e=!0))})),r):r}},{key:"gmm",value:function(){var e=this.mm;return e&&{xy:[e.clientX,e.clientY,e.screenX,e.screenY,e.offsetX,e.offsetY,e.pageX,e.pageY,e.movementX,e.movementY],ts:e.timeStamp}}},{key:"gtm",value:function(){var e=this.tm,t=e&&e.touches,n=t&&t[0];return e&&n&&{id:n.identifier,xy:[n.clientX,n.clientY,n.screenX,n.screenY,n.pageX,n.pageY],r:[n.radiusX,n.radiusX,n.rotationAngle,n.force],n:t.length,ts:e.timeStamp,rn:this.rn}}},{key:"get",value:function(e){var t=document.body,n=window,r=n.performance;return{v:1,i:++this.i,hl:history.length,fe:!!window.frameElement,dep:this.dep,wid:e,sc:parseInt(d(!1)),sid:f(),conv:0,t:{pnow:b(),pto:r&&r.timeOrigin||0,ts:Date.now()},dims:{d:[n.innerWidth,n.innerHeight,n.outerWidth,n.outerHeight,n.screenX,n.screenY,n.pageXOffset,n.pageYOffset,t.clientWidth,t.clientHeight],dpr:n.devicePixelRatio},mel:this.smel,mm:this.gmm(),tm:this.gtm(),bh:this.bh,stack:(new Error).stack||"",trc:this.takeTraceRecords()}}}]),e}(),Q={eu:"https://eu.frcapi.com",global:"https://global.frcapi.com"},$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",ee="FrcFrameId",te=0,ne=function(){function n(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,n),this.agents=new Map,this.agentState=new Map,this.widgets=new Map,this._attached=r(),this.attached=this._attached.promise,this.apiEndpoint=i.apiEndpoint,(j=j||new F).listen((function(e){return t.onReceiveMessage(e)})),this.bus=j,++te>1&&console.warn("Multiple Friendly Captcha SDKs created, this is not recommended. Please use a single SDK instance."),this.signals=function(e){return z||(z=new J(e))}({disableEvalPatching:i.disableEvalPatching||(e=document.querySelector('meta[name="frc-disable-eval-patching"]'),!!e&&!!e.content)}),i.startAgent){var o=x(this.apiEndpoint||M());this.ensureAgentIFrame(o)}this.setupPeriodicRefresh()}return _createClass(n,[{key:"onReceiveMessage",value:function(e){if("root_set_response"===e.type){var t=this.widgets.get(e.widget_id);if(!t)return void(1===te&&console.warn("Received set response message for widget ".concat(e.widget_id," that doesn't exist")));t.setState(e)}else if(i(e.type,"root_store"))this.handleStoreMessage(e);else if("root_signals_get"===e.type)this.handleSignalsGetMessage(e);else if("widget_language_change"===e.type)this.handleWidgetLanguageChange(e);else if("widget_reset"===e.type){var n=this.widgets.get(e.from_id);if(!n)return void(1===te&&console.warn("Received reset message for widget ".concat(e.from_id," that doesn't exist")));n.reset({trigger:"widget"})}}},{key:"handleWidgetLanguageChange",value:function(e){var t=this.widgets.get(e.from_id);if(t){var n=t.getElement(),r=n.querySelector("iframe");r&&(r.title=m(e.language));var i=n.querySelector(".frc-banner");if(i){var o=i.style;g(e.language)?(o.left="6px",o.right="auto"):(o.left="auto",o.right="6px")}}else 1===te&&console.warn("Received language change message for widget ".concat(e.from_id," that doesn't exist"))}},{key:"handleSignalsGetMessage",value:function(e){var t=this.signals.get(e.widget_id);this.bus.send({type:"root_signals_get_reply",from_id:"",to_id:e.from_id,_frc:1,rid:e.rid,value:t})}},{key:"handleStoreMessage",value:function(e){var t=this,n=e.from_id,r=this.agentState.get(n);r?"root_store_get"===e.type?r.store.get(e.key,{p:e.p}).then((function(i){t.bus.send({type:"root_store_get_reply",from_id:"",to_id:n,_frc:1,rid:e.rid,value:i,sa:r.store.hasSA()})})):"root_store_set"===e.type&&r.store.set(e.key,e.value,{p:e.p}).then((function(){t.bus.send({type:"root_store_set_reply",from_id:"",to_id:n,_frc:1,rid:e.rid,sa:r.store.hasSA()})})):console.error("Store not found ".concat(n))}},{key:"ensureAgentIFrame",value:function(e){for(var t=this,n=e+"/api/v2/captcha/agent",r=document.getElementsByClassName(U),i=0;i<r.length;i++){var c=r[i];if(a(c.src)===e&&c.dataset[ee])return c.dataset[ee]}var u="a_"+s(12),l=function(e,t,n){var r={origin:document.location.origin,sess_id:f(),sess_c:d(!0),comm_id:t,sdk_v:"0.1.36",v:"1",agent_id:t,ts:Date.now().toString()},i=document.createElement("iframe");i.className=U,i.dataset[K]=t,i.src=n+"?"+o(r),i.frcSDK=e;var a=i.style;return a.width=a.height=a.border=a.visibility="0",a.display="none",i}(this,u,n);this.agents.set(e,l),this.agentState.set(u,{store:new X(e),origin:e}),document.body.appendChild(l);var h=1;return function n(){t.bus.registerTargetIFrame("agent",u,l,t.getRetryTimeout(h)).then((function(r){if("timeout"===r){if(h>4)return console.error("[Friendly Captcha] Failed to load agent iframe after 4 retries."),l.remove(),void t.agents.delete(e);console.warn("[Friendly Captcha] Retrying agent iframe load."),l.src+="&retry="+h++,n()}}))}(),u}},{key:"setupPeriodicRefresh",value:function(){var e=this,t=1;setInterval((function(){var n="&expire="+t++;e.agents.forEach((function(e){e.src+=n})),e.widgets.forEach((function(e){e.getElement().querySelector("iframe").src+=n}))}),1296e5)}},{key:"getRetryTimeout",value:function(e){return 1e3*Math.pow(e,1.8)+2e3}},{key:"attach",value:function(t){void 0===t&&(t=e()),Array.isArray(t)||t instanceof NodeList||(t=[t]);for(var n=[],r=0;r<t.length;r++){var i=t[r];if(i&&!i.frcWidget){var o=i.dataset,a={element:i,sitekey:o.sitekey,formFieldName:o.formFieldName,apiEndpoint:o.apiEndpoint,language:o.lang,theme:o.theme,startMode:o.start};n.push(this.createWidget(a))}}var s=this.getAllWidgets();return this._attached.resolve(s),this.attached=Promise.resolve(s),n}},{key:"createWidget",value:function(e){function n(t){var n,r=(n=JSON.stringify({sdk_v:"0.1.36",sitekey:e.sitekey||"",retry:z+"",endpoint:c,ua:navigator.userAgent,tz:P()||""}),window.TextEncoder?function(e){for(var t=e.length,n="",r=0;r<t;r+=3){var i=e[r+0],o=e[r+1],a=e[r+2],s="";s+=$.charAt(i>>>2),s+=$.charAt((3&i)<<4|o>>>4),s+=$.charAt((15&o)<<2|a>>>6),n+=s+=$.charAt(63&a)}return t%3==2?n=n.substring(0,n.length-1)+"=":t%3==1&&(n=n.substring(0,n.length-2)+"=="),n}((new TextEncoder).encode(n)):""),i=".ERROR.UNREACHABLE";r&&(i+="~"+r),_.setState({state:"error",response:i,error:{code:"network_error",detail:t}})}var i=this,c=x(e.apiEndpoint||this.apiEndpoint||M());this.bus.addOrigin(c);var u=this.ensureAgentIFrame(c),l="w_"+s(12),h=function(e){var t={from_id:l,to_id:u,_frc:1};i.bus.send(w(t,e))},b={onDestroy:function(){h({type:"root_destroy_widget"}),i.bus.removeTarget(l),i.widgets.delete(l),e.element.innerHTML="",e.element.removeAttribute("style")},onReset:function(){h({type:"root_reset_widget"})},onTrigger:function(e){h({type:"root_trigger_widget",trigger:e.trigger})}},k=r(),_=new B({id:l,createOpts:e,callbacks:b,registered:k.promise});this.widgets.set(l,_);var S,E,A=function(e,t,n,r){var i=document.createElement("iframe"),a=y(r),s={origin:document.location.origin,sess_id:f(),sess_c:d(!0),comm_id:t,sdk_v:"0.1.36",v:"1",agent_id:e,lang:a,sitekey:r.sitekey||"",ts:Date.now().toString()};r.theme&&(s.theme=r.theme),Y&&(i.allow="clipboard-write"),i.frameBorder="0",i.src=n+"?"+o(s),i.className="frc-i-widget",i.title=m(a),i.dataset[K]=t;var c=i.style;return c.border=c.visibility="0",c.position="absolute",c.height=c.width="100%",c.display="none",r.element.appendChild(i),i}(u,l,c+"/api/v2/captcha/widget",e),R=function(e){var t=document.createElement("div");t.classList.add("frc-widget-placeholder");var n=t.style,r="dark"===e.theme||"auto"===e.theme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return n.color=r?"#fff":"#222",n.backgroundColor=r?"#171717":"#fafafa",n.borderRadius="4px",n.border="1px solid",n.borderColor="#ddd",n.padding="8px",n.height=n.width="100%",n.fontSize="14px",p(n),e.element.appendChild(t),t}(e);(E=t)(S=e.element,"position","relative"),E(S,"height","70px"),E(S,"padding","0"),E(S,"width","316px"),E(S,"maxWidth","100%"),E(S,"maxHeight","100%"),E(S,"overflow","hidden"),E(S,"borderRadius","4px"),function(e){var t=document.createElement("div");t.classList.add("frc-banner");var n=y(e),r="dark"===e.theme||"auto"===e.theme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,i="#565656",o="#a2a2a2";r&&(i="#a2a2a2",o="#565656");var a=t.style;a.position="absolute",a.bottom="6px",g(n)?a.left="6px":a.right="6px",a.lineHeight="1";var s=document.createElement("a");s.href="https://friendlycaptcha.com",s.rel="noopener";var c=s.style;p(c),c.color=i,c.fontSize="10px",c.userSelect="none",c.textDecorationLine="underline",c.textDecorationThickness="1px",c.textDecorationColor=o,c.letterSpacing="-0.0125rem",s.target="_blank",s.textContent="Friendly Captcha",s.onmouseenter=function(){return c.textDecorationColor=i},s.onmouseleave=function(){return c.textDecorationColor=o},t.appendChild(s),e.element.appendChild(t)}(e);var C=y(e);g(C)&&(e.element.dir="rtl");var T=R.style;R.textContent=v(C,"connecting");var z=1;return function t(){i.bus.registerTargetIFrame("widget",l,A,i.getRetryTimeout(z)).then((function(r){if("timeout"===r){if(z>4)return console.error("[Friendly Captcha] Failed to load widget iframe after 4 retries."),n("Widget load timeout, stopped retrying"),T.borderColor="#f00",T.fontSize="12px",void function(e,t,n){var r=v(n,"failed"),i=[function(e,t){var n=document.createElement("a");n.href=e,n.target="_blank",n.rel="noopener",n.textContent=t;var r=n.style;return p(r),r.textDecoration="underline",r.color="#565656",n.onmouseenter=function(){return r.textDecoration="none"},n.onmouseleave=function(){return r.textDecoration="underline"},n}("".concat(t,"/connectionTest"),r)];e.textContent="",i.forEach((function(t){return e.appendChild(t)}))}(R,a(A.src),C);T.backgroundColor="#fee",T.color="#222",R.textContent=v(C,"retrying")+" (".concat(z,")"),console.warn("[Friendly Captcha] Retrying widget ".concat(l," iframe load.")),n("Widget load timeout, will retry"),A.src+="&retry="+z++,t()}else"registered"===r&&(e.element.removeChild(R),A.style.display="")}))}(),k.resolve(),_}},{key:"getAllWidgets",value:function(){var e=[];return this.widgets.forEach((function(t){e.push(t)})),e}},{key:"getWidgetById",value:function(e){return this.widgets.get(e)}},{key:"clear",value:function(){this.widgets.forEach((function(e){e.destroy()})),this.agents.forEach((function(e){e.remove()})),this.agents.clear()}}]),n}();window.frcaptcha=new ne,n((function(){var t=e();window.frcaptcha.attach(t)}))}();
/*!
 * Copyright (c) Friendly Captcha GmbH 2023.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */